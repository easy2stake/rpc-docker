name: xlayer-erigon

services:
  xlayer:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: xlayer-cdk-erigon
    restart: unless-stopped
    mem_limit: ${MEM_LIMIT}
    stop_grace_period: 120s
    ports:
      - "${HTTP_PORT}:8545"
      - "${WS_PORT}:8546"
    volumes:
      - "${HOME}/erigon-data:${DATADIR}"
      - "./xlayer.yaml:/app/config/xlayer.yaml:ro"
    command:
      - "--config=/app/config/xlayer.yaml"
      - --zkevm.l1-rpc-url=${ZKEVM_L1_RPC_URL}
      - --debug.no-sync
      - --nodiscover 
      - --maxpeers=0


